<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dragon Timing Minigame</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Mute Toggle -->
  <button id="muteToggle" tabindex="-1">ðŸ”‡</button>

  <!-- Coin Display -->
  <div id="coinDisplay">Gold: <span id="goldCount">0</span></div>

  <!-- Menu Toggle -->
  <button id="menuToggle">â˜°</button>

  <!-- Menu Modal -->
  <div id="menuModal">
    <div id="menuContent">
      <div class="menuHeader">
        <h2>Menu</h2>
        <button class="closeBtn" id="closeMenu">Ã—</button>
      </div>
      <div class="menuButtons">
        <button data-panel="settings" class="active">Settings</button>
        <button data-panel="roulette">Roulette</button>
        <button data-panel="shop">Shop</button>
      </div>
      <!-- Settings Panel -->
      <div id="settings" class="panel active">
        <label for="volume">Volume: <span id="volLabel">0%</span></label>
        <input type="range" id="volume" min="0" max="100" value="0">
      </div>
      <!-- Roulette Panel -->
      <div id="roulette" class="panel">
        <button class="spinBtn">Spin for 100 Gold</button>
        <div id="reelContainer">
            <div id="reel"></div>
        </div>
        <div id="spinResult"></div>
      </div>
      <!-- Shop Panel -->
      <div id="shop" class="panel">
        <button class="buyBtn">Buy pet for 2000 Gold</button>
        <div id="shopReelContainer">
            <div id="shopReel"></div>
        </div>
        <div id="shopResult"></div>
    </div>
    </div>
  </div>

  <div id="container">
    <!-- original game content... -->
    <div id="leftPanel">
      <div id="bossBarContainer"><div id="bossBar"></div></div>
      <canvas id="gameCanvas" width="300" height="300" tabindex="0"></canvas>
      <div id="overlay"><span id="message"></span></div>
      <div id="ui">
        <div id="status">
          <span>Health: <strong id="health">200</strong></span>
          <span>Beds: <strong id="attempt">0</strong>/5</span>
        </div>
        <div id="lastHit">Last Hit: <span id="hitAmt">â€”</span></div>
        <button id="attackBtn">Attack</button>
        <button id="restart">Restart</button>
      </div>
    </div>
    <div id="rightPanel">
      <img id="enderDragon" src="src/endy_dragon.gif" alt="Ender Dragon" />
      <img id="bed" src="src/White_Bed.png" alt="Bed" />
      <img id="explosion" src="src/boom1.gif" alt="Explosion" />
    </div>
  </div>

  <!-- Sound Effects -->
  <audio id="flap" src="src/flap.mp3" loop muted></audio>
  <audio id="explode" src="src/explode.mp3" muted></audio>
  <button id="petToggle" title="Your Pets"
        style="position:fixed;bottom:1rem;right:1rem;
               width:48px;height:48px;padding:0;
               border:none;background:none;cursor:pointer;">
  <img id="currentPetIcon" src="src/placeholder.png" alt="No Pet"
       style="width:100%;height:100%;border-radius:4px;">
</button>

<div id="petModal" style="display:none;position:fixed;
     bottom:4rem;right:1rem;background:#222;
     padding:1rem;border:2px solid #888;border-radius:8px;flex-direction:column;">
  <h4 style="margin:0 0 .5rem;color:white;">Select Your Pet</h4>
  <div id="petList" style="display:flex;flex-wrap:wrap;gap:.5rem;"></div>
  <button id="closePetModal" style="margin-top:.5rem;">Close</button>
</div>
  <script src="script.js"></script>
</body>
</html>
